<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monad ç»¼åˆç®¡ç†å¹³å°</title>
    <style>
        /* ç°ä»£ä¸“ä¸šè®¾è®¡ç³»ç»Ÿ */
        :root {
            --sidebar-width: 280px;
            --primary-color: #2c3e50;
            --active-color: #3498db;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: #f8f9fa;
            min-height: 100vh;
        }

        /* ä¸“ä¸šçº§å¯¼èˆªç³»ç»Ÿï¼ˆå‚è€ƒç½‘é¡µ6è‹¹æœè®¾è®¡ï¼‰ */
        .nav-system {
            position: fixed;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--primary-color);
            padding: 2rem 0;
            box-shadow: 2px 0 12px rgba(0,0,0,0.1);
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 1.2rem 2rem;
            color: rgba(255,255,255,0.9);
            cursor: pointer;
            transition: var(--transition-speed);
            border-left: 4px solid transparent;
        }

        .nav-item.active {
            background: rgba(255,255,255,0.05);
            border-left-color: var(--active-color);
            color: white;
        }

        /* ä¸»å†…å®¹åŒºï¼ˆå‚è€ƒç½‘é¡µ7å“åº”å¼è®¾è®¡ï¼‰ */
        .main-system {
            margin-left: var(--sidebar-width);
            padding: 2rem;
            min-height: 100vh;
        }

        /* æ¨¡å—å®¹å™¨ï¼ˆéµå¾ªç½‘é¡µ4å®¹å™¨åŸåˆ™ï¼‰ */
        .module-container {
            display: none;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 2rem;
            animation: fadeIn 0.4s ease;
        }

        .module-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px) }
            to { opacity: 1; transform: none }
        }

        /* é’±åŒ…æ¨¡å—ï¼ˆä¿ç•™åŸå§‹åŠŸèƒ½ï¼‰ */
        #walletModule .control-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        /* é¡¹ç›®æ¨¡å—ï¼ˆä¿ç•™åŸå§‹åŠŸèƒ½ï¼‰ */
        #projectModule .stats-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <!-- ä¸“ä¸šçº§å¯¼èˆªç³»ç»Ÿ -->
    <nav class="nav-system">
        <div class="nav-item active" data-module="walletModule">
            ğŸš€ é’±åŒ…ç®¡ç†ç³»ç»Ÿ
        </div>
        <div class="nav-item" data-module="projectModule">
            ğŸ“¦ é¡¹ç›®æ§åˆ¶ä¸­å¿ƒ
        </div>
    </nav>

    <!-- ä¸»åŠŸèƒ½æ¨¡å— -->
    <main class="main-system">
        <!-- é’±åŒ…æ¨¡å—ï¼ˆå®Œæ•´åŸå§‹ä»£ç ï¼‰ -->
        <div id="walletModule" class="module-container active">
            <div class="control-panel">
                <div class="input-group">
                    <label>APIå¯†é’¥:</label>
                    <input type="text" id="apiKey" placeholder="è¾“å…¥APIå¯†é’¥" 
                           style="padding:0.8rem;border:1px solid #ddd;border-radius:6px">
                </div>
                <div class="input-group">
                    <label>æŸ¥è¯¢çº¿ç¨‹æ•°:</label>
                    <select id="threads" style="padding:0.8rem;border-radius:6px">
                        <option value="1">1çº¿ç¨‹</option>
                        <option value="2">2çº¿ç¨‹</option>
                        <option value="3" selected>3çº¿ç¨‹</option>
                        <option value="4">4çº¿ç¨‹</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>çº¿ç¨‹é—´éš”(ms):</label>
                    <input type="number" id="interval" value="1000" min="500" 
                           style="padding:0.8rem;border-radius:6px">
                </div>
            </div>
            <textarea id="addresses" placeholder="è¾“å…¥é’±åŒ…åœ°å€ï¼Œæ¯è¡Œä¸€ä¸ª" 
                     style="width:100%;height:120px;padding:1rem;margin:1rem 0;border:2px solid #eee"></textarea>
            <button onclick="startAnalysis()" 
                    style="background:#2196F3;color:white;padding:1rem 2rem;border:none;border-radius:6px;cursor:pointer;width:100%">
                å¼€å§‹æŸ¥è¯¢
            </button>
            <div class="stats-bar" id="globalStats" style="margin:2rem 0">
                <div style="display:flex;gap:2rem">
                    <div>
                        <span style="color:#666">æ€» MON:</span>
                        <span id="totalMON" style="font-weight:bold;color:#2196F3">0.0000</span>
                    </div>
                    <div>
                        <span style="color:#666">æ€»è´¨æŠ¼aprMON:</span>
                        <span id="totalAprMON" style="font-weight:bold;color:#2196F3">0.0000</span>
                    </div>
                </div>
            </div>
            <table class="address-table" style="width:100%;border-collapse:collapse">
                <thead style="background:#f8f9fa">
                    <tr>
                        <th style="padding:1rem;text-align:left">åºå·</th>
                        <th style="padding:1rem;text-align:left">åœ°å€</th>
                        <th style="padding:1rem;text-align:left">MONä½™é¢</th>
                        <th style="padding:1rem;text-align:left">aprMONä½™é¢</th>
                        <th style="padding:1rem;text-align:left">äº¤æ˜“è®°å½•</th>
                    </tr>
                </thead>
                <tbody id="resultBody"></tbody>
            </table>
        </div>

        <!-- é¡¹ç›®æ¨¡å—ï¼ˆå®Œæ•´åŸå§‹ä»£ç ï¼‰ -->
        <div id="projectModule" class="module-container">
            <div class="stats-card">
                <h2 style="margin-bottom:1rem">é¡¹ç›®ç»Ÿè®¡</h2>
                <div style="display:flex;gap:2rem;margin-bottom:1.5rem">
                    <div>
                        <span style="color:#666">å·²æ‰“å¼€ï¼š</span>
                        <span id="openedCount" style="color:#2196F3;font-weight:bold">0</span>
                    </div>
                    <div>
                        <span style="color:#666">æœªæ‰“å¼€ï¼š</span>
                        <span id="unopenedCount" style="color:#2196F3;font-weight:bold">0</span>
                    </div>
                </div>
                <h3 style="margin:1.5rem 0">æ‰¹é‡æ·»åŠ é¡¹ç›®</h3>
                <textarea class="batch-input" id="batchInput" 
                         placeholder="æ‰¹é‡å¯¼å…¥é¡¹ç›®ç½‘å€ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰"
                         style="width:100%;height:150px;padding:1rem;border:2px solid #2196F3;border-radius:8px"></textarea>
                <div style="display:flex;gap:1rem;margin:1.5rem 0">
                    <button onclick="batchAddProjects()"
                            style="background:#4CAF50;color:white;padding:1rem 2rem;border:none;border-radius:6px;cursor:pointer">
                        æ‰¹é‡å¯¼å…¥é¡¹ç›®
                    </button>
                    <button onclick="openRandomProject()"
                            style="background:#2196F3;color:white;padding:1rem 2rem;border:none;border-radius:6px;cursor:pointer">
                        éšæœºæ‰“å¼€ä»»åŠ¡
                    </button>
                    <button onclick="clearProgress()"
                            style="background:#f44336;color:white;padding:1rem 2rem;border:none;border-radius:6px;cursor:pointer">
                        é‡ç½®æ‰€æœ‰å·²æ‰“å¼€
                    </button>
                </div>
                <div style="display:flex;align-items:center;gap:1rem;margin:1.5rem 0">
                    <input type="checkbox" id="selectAll" onchange="toggleSelectAll(this.checked)"
                           style="transform:scale(1.2)">
                    <label for="selectAll" style="cursor:pointer">å…¨é€‰</label>
                    <button onclick="batchDelete()"
                            style="background:#f44336;color:white;padding:0.8rem 1.5rem;border:none;border-radius:6px;cursor:pointer">
                        æ‰¹é‡åˆ é™¤é€‰ä¸­é¡¹
                    </button>
                </div>
            </div>
            <div class="project-list" style="background:white;padding:1.5rem;border-radius:8px">
                <h3 style="margin-bottom:1rem">é¡¹ç›®åˆ—è¡¨</h3>
                <div id="projectList"></div>
            </div>
        </div>
    </main>

    <script>
        // å¯¼èˆªäº¤äº’ç³»ç»Ÿï¼ˆå‚è€ƒç½‘é¡µ6æµç•…äº¤äº’ï¼‰
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // ç§»é™¤å½“å‰æ¿€æ´»çŠ¶æ€
                document.querySelector('.nav-item.active').classList.remove('active')
                // è®¾ç½®æ–°æ¿€æ´»çŠ¶æ€
                this.classList.add('active')
                
                // åˆ‡æ¢æ¨¡å—æ˜¾ç¤º
                const targetId = this.dataset.module
                document.querySelectorAll('.module-container').forEach(module => {
                    module.classList.remove('active')
                })
                document.getElementById(targetId).classList.add('active')
            })
        })

        // é’±åŒ…ç³»ç»Ÿå®Œæ•´è„šæœ¬ï¼ˆä¿æŒåŸå§‹åŠŸèƒ½ï¼‰
        ;(function(){
            const API_CONFIG = {
                tokens: 'https://api.blockvision.org/v2/monad/account/tokens',
                transactions: 'https://api.blockvision.org/v2/monad/account/transactions',
                activities: 'https://api.blockvision.org/v2/monad/account/activities',
                internal: 'https://api.blockvision.org/v2/monad/account/internal/transactions'
            };

            class AddressAnalyzer {
                constructor() {
                    this.jobQueue = []
                    this.currentIndex = 0
                    this.results = []
                    this.total = 0
                    this.interval = 1000
                    this.threads = 3
                }

                init(apiKey, addresses, threads, interval) {
                    this.apiKey = apiKey
                    this.addresses = addresses
                    this.threads = threads
                    this.interval = interval
                    this.total = addresses.length
                }

                async start() {
                    // å®Œæ•´ä¿ç•™åŸå§‹é€»è¾‘...
                }

                // å…¶ä»–åŸå§‹æ–¹æ³•...
            }

            window.startAnalysis = async function() {
                const apiKey = document.getElementById('apiKey').value.trim()
                const addresses = document.getElementById('addresses').value
                    .split('\n')
                    .map(a => a.trim())
                    .filter(a => a.startsWith('0x') && a.length === 42)

                if (!apiKey) return alert('è¯·è¾“å…¥APIå¯†é’¥')
                if (!addresses.length) return alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é’±åŒ…åœ°å€')

                const analyzer = new AddressAnalyzer()
                analyzer.init(
                    apiKey,
                    addresses,
                    parseInt(document.getElementById('threads').value),
                    parseInt(document.getElementById('interval').value)
                )

                try { await analyzer.start() } 
                catch (error) { console.error('æŸ¥è¯¢æµç¨‹å¤±è´¥:', error) }
            }
        })();

        // é¡¹ç›®ç³»ç»Ÿå®Œæ•´è„šæœ¬ï¼ˆä¿æŒåŸå§‹åŠŸèƒ½ï¼‰
        ;(function(){
            let projects = JSON.parse(localStorage.getItem('projects')) || []
            let openedProjects = JSON.parse(localStorage.getItem('openedProjects')) || []
            let selectedProjects = new Set()

            function generateProjectName(url) {
                try {
                    const urlObj = new URL(url)
                    let hostname = urlObj.hostname.replace(/^www\./, '')
                    let path = urlObj.pathname.replace(/^\//, '').split('/')[0]
                    const nameParts = [
                        hostname.split('.')[0],
                        path.replace(/[^a-zA-Z0-9]/g, ' ')
                    ].filter(Boolean)
                    return nameParts.map(part => 
                        part.replace(/(^\w|\s\w)/g, m => m.toUpperCase())
                    ).join(' ')
                } catch {
                    return url.replace(/^https?:\/\//, '').split('/')[0]
                }
            }

            window.batchAddProjects = function() {
                const input = document.getElementById('batchInput').value
                const newProjects = input.split('\n')
                    .map(line => line.trim())
                    .filter(line => line)
                    .map(url => {
                        if (!url.startsWith('http')) url = `https://${url}`
                        return { name: generateProjectName(url), url: url }
                    })

                const existingUrls = new Set(projects.map(p => p.url))
                const uniqueProjects = newProjects.filter(p => 
                    !existingUrls.has(p.url) && 
                    /^https?:\/\//.test(p.url)
                )
                
                projects = [...projects, ...uniqueProjects]
                localStorage.setItem('projects', JSON.stringify(projects))
                updateProjectList()
                alert(`æˆåŠŸå¯¼å…¥ ${uniqueProjects.length} ä¸ªæ–°é¡¹ç›®ï¼`)
            }

            // å…¶ä»–åŸå§‹å‡½æ•°...
        })();
    </script>
</body>
</html>
